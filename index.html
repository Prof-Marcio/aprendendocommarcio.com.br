<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SALA M√ÅRCIO V9 - FINAL</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');

        :root {
            --primary: #3b82f6;
            --parede: #1e293b;
            --cor-carteira: #f59e0b;
            --zoom: 0.8;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }

        body { 
            background: #f1f5f9; color: #1e293b;
            height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }

        header {
            height: 50px; background: #fff; border-bottom: 1px solid #e2e8f0;
            display: flex; align-items: center; justify-content: center; z-index: 1000;
        }

        .main-container {
            flex-grow: 1; overflow: auto; display: flex; 
            justify-content: center; align-items: flex-start; padding: 20px;
            background: #cbd5e1;
        }

        .a4-page {
            width: 210mm; height: 297mm; background: #fff;
            padding: 10mm; position: relative; flex-shrink: 0;
            transform: scale(var(--zoom)); transform-origin: top center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            display: flex; flex-direction: column;
        }

        .sala-box {
            width: 100%; height: 100%; border: 16px solid var(--parede);
            position: relative; display: flex; flex-direction: column; 
            border-radius: 4px; overflow: hidden; background: #fff;
        }

        /* Texto Entrada na Parede */
        .entrada-label {
            position: absolute; left: -14px; bottom: 80px;
            background: #fff; padding: 5px; font-weight: 800;
            font-size: 14px; color: var(--parede); z-index: 20;
            transform: rotate(-90deg); border: 2px solid var(--parede);
        }

        .topo-sala { width: 100%; display: flex; justify-content: center; padding: 10px; }
        .tv { width: 180px; height: 10px; background: #000; border-radius: 0 0 10px 10px; }

        .grid-alunos { 
            flex: 1; display: grid; gap: 10px; padding: 20px 40px;
            align-content: center; justify-items: center;
        }

        /* Base da Sala: Quadro no Centro e Bir√¥ ao Lado */
        .base-sala { 
            width: 100%; padding: 15px; display: grid; 
            grid-template-columns: 1fr auto 1fr; align-items: end; gap: 20px;
        }

        .quadro { 
            grid-column: 2; width: 350px; height: 50px; 
            background: #065f46; border: 5px solid #451a03;
            border-radius: 8px 8px 8px 8px; color: #fff;
            display: flex; align-items: center; justify-content: center; font-weight: 700;
        }

        .biro-prof { 
            grid-column: 3; width: 100px; height: 60px; 
            background: #e2e8f0; border: 2px dashed #64748b;
            border-radius: 6px; display: flex; align-items: center; 
            justify-content: center; font-size: 11px; font-weight: 800; color: #64748b;
        }

        .desk { 
            background: var(--cor-carteira); width: 100%; height: 100%;
            max-height: 90px; border-radius: 8px; padding: 5px; 
            display: flex; flex-direction: column; align-items: center; 
            justify-content: center; border: 1px solid rgba(0,0,0,0.1);
        }
        
        .foto-aluno {
            width: 38px; height: 38px; background: #fff; border-radius: 50%;
            border: 2px solid #fff; overflow: hidden; margin-bottom: 2px;
        }
        .foto-aluno img { width: 100%; height: 100%; object-fit: cover; }

        .nome-aluno {
            width: 98%; background: #fff; border: none; border-radius: 2px;
            text-align: center; font-weight: 800; font-size: 10px; padding: 2px 0;
        }

        footer {
            height: 100px; background: #fff; border-top: 1px solid #e2e8f0;
            display: flex; align-items: center; padding: 0 20px; z-index: 1000;
        }

        .toolbar { display: flex; gap: 20px; width: 100%; overflow-x: auto; align-items: center; justify-content: center; }
        .tool-item { display: flex; flex-direction: column; min-width: 90px; }
        .tool-item label { font-size: 9px; font-weight: 800; color: #94a3b8; text-transform: uppercase; }
        
        .btn-print { background: var(--primary); color: white; border: none; padding: 12px 20px; border-radius: 10px; font-weight: 800; cursor: pointer; }

        @media (max-width: 768px) {
            .a4-page { transform: scale(0.32) translateY(-40%); }
            footer { padding: 10px; }
            .toolbar { justify-content: flex-start; }
        }

        @media print {
            header, footer { display: none !important; }
            .main-container { padding: 0; background: #fff; }
            .a4-page { transform: scale(1) !important; box-shadow: none; }
        }
    </style>
</head>
<body>

<header>
    <h1 style="font-size: 16px; font-weight: 800;">MAPEAMENTO DE SALA - M√ÅRCIO</h1>
</header>

<main class="main-container">
    <div class="a4-page" id="folha">
        <h2 contenteditable="true" style="text-align:center; margin-bottom:10px; font-weight:800; font-size: 24px;">MAPA: TURMA _____</h2>
        
        <div class="sala-box">
            <div class="entrada-label">ENTRADA</div>
            
            <div class="topo-sala">
                <div class="tv"></div>
            </div>

            <div id="grid" class="grid-alunos"></div>

            <div class="base-sala">
                <div></div> <div class="quadro" contenteditable="true">QUADRO</div>
                <div class="biro-prof">BIR√î PROF.</div>
            </div>
        </div>
    </div>
</main>

<footer>
    <div class="toolbar">
        <div class="tool-item">
            <label>üîç Zoom</label>
            <input type="range" id="zoom" min="0.2" max="1.3" step="0.05" value="0.75" oninput="update()">
        </div>
        <div class="tool-item">
            <label>‚ÜîÔ∏è Colunas</label>
            <input type="number" id="cols" value="5" min="1" oninput="render()">
        </div>
        <div class="tool-item">
            <label>‚ÜïÔ∏è Fileiras</label>
            <input type="number" id="rows" value="6" min="1" oninput="render()">
        </div>
        <div class="tool-item">
            <label>üé® Cor</label>
            <input type="color" id="cor" value="#f59e0b" oninput="update()">
        </div>
        <button class="btn-print" onclick="window.print()">IMPRIMIR PDF</button>
    </div>
</footer>

<script>
    function update() {
        document.documentElement.style.setProperty('--zoom', document.getElementById('zoom').value);
        document.documentElement.style.setProperty('--cor-carteira', document.getElementById('cor').value);
    }

    function render() {
        const grid = document.getElementById('grid');
        const c = parseInt(document.getElementById('cols').value) || 1;
        const r = parseInt(document.getElementById('rows').value) || 1;
        grid.style.gridTemplateColumns = `repeat(${c}, 1fr)`;
        grid.style.gridTemplateRows = `repeat(${r}, 1fr)`;
        grid.innerHTML = '';

        for (let i = 0; i < (c * r); i++) {
            const desk = document.createElement('div');
            desk.className = 'desk';
            desk.innerHTML = `
                <div class="foto-aluno" onclick="this.nextElementSibling.click()">
                    <img src="https://api.dicebear.com/7.x/initials/svg?seed=A${i}">
                </div>
                <input type="file" style="display:none" onchange="subirFoto(this)">
                <input type="text" class="nome-aluno" placeholder="Nome">
            `;
            grid.appendChild(desk);
        }
    }

    function subirFoto(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = e => { input.previousElementSibling.querySelector('img').src = e.target.result; };
            reader.readAsDataURL(input.files[0]);
        }
    }

    window.onload = () => {
        if(window.innerWidth < 768) document.getElementById('zoom').value = 0.35;
        render();
        update();
    }
</script>
</body>
</html>